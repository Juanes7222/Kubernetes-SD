<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Usuarios con Firebase</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <style>
        body {
            background-color: #f8f9fa;
            padding-top: 20px;
        }
        .form-section {
            background: white;
            border-radius: 10px;
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
            margin-bottom: 30px;
            padding: 25px;
            transition: transform 0.3s;
        }
        .form-section:hover {
            transform: translateY(-5px);
        }
        .section-header {
            border-bottom: 2px solid #0d6efd;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }
        .form-navigation {
            position: sticky;
            top: 20px;
            z-index: 100;
        }
        .submit-btn {
            width: 100%;
            padding: 12px;
            font-weight: 600;
        }
        .form-icon {
            font-size: 1.8rem;
            margin-right: 10px;
            color: #0d6efd;
        }
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
        }
        .password-toggle {
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="text-center mb-5">
            <h1 class="display-4 fw-bold text-primary">Registro de Usuarios</h1>
            <p class="lead">Complete los siguientes formularios según sus necesidades</p>
        </header>

        <!-- Toast para mensajes -->
        <div class="toast-container">
            <div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="toast-header">
                    <strong id="toast-title" class="me-auto">Notificación</strong>
                    <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
                <div id="toast-body" class="toast-body"></div>
            </div>
        </div>

        <!-- Form Navigation -->
        <div class="row mb-4">
            <div class="col-md-12">
                <div class="card form-navigation">
                    <div class="card-body text-center">
                        <div class="btn-group" role="group">
                            <a href="#form1" class="btn btn-outline-primary">Registro</a>
                            <a href="#form2" class="btn btn-outline-primary">Contacto</a>
                            <a href="#form3" class="btn btn-outline-primary">Feedback</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <!-- Form 1: Registration Form -->
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="form-section" id="form1">
                    <div class="section-header d-flex align-items-center">
                        <i class="bi bi-person-plus-fill form-icon"></i>
                        <h2 class="h4 mb-0">Registro de Usuario</h2>
                    </div>
                    <form id="registrationForm">
                        <div class="mb-3">
                            <label for="fullName" class="form-label">Nombre Completo</label>
                            <input type="text" class="form-control" id="fullName" placeholder="Ingrese su nombre completo" required>
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">Correo Electrónico</label>
                            <input type="email" class="form-control" id="email" placeholder="nombre@ejemplo.com" required>
                        </div>
                        <div class="mb-3">
                            <label for="password" class="form-label">Contraseña</label>
                            <div class="input-group">
                                <input type="password" class="form-control" id="password" placeholder="Cree una contraseña" required>
                                <span class="input-group-text password-toggle" id="togglePassword">
                                    <i class="bi bi-eye"></i>
                                </span>
                            </div>
                            <div class="form-text">La contraseña debe tener al menos 6 caracteres.</div>
                        </div>
                        <div class="mb-3">
                            <label for="confirmPassword" class="form-label">Confirmar Contraseña</label>
                            <div class="input-group">
                                <input type="password" class="form-control" id="confirmPassword" placeholder="Confirme su contraseña" required>
                                <span class="input-group-text password-toggle" id="toggleConfirmPassword">
                                    <i class="bi bi-eye"></i>
                                </span>
                            </div>
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="terms" required>
                            <label class="form-check-label" for="terms">Acepto los términos y condiciones</label>
                        </div>
                        <button type="submit" class="btn btn-primary submit-btn" id="registerBtn">
                            <span class="spinner-border spinner-border-sm me-2 d-none" id="registerSpinner" role="status" aria-hidden="true"></span>
                            Registrarse
                        </button>
                    </form>
                </div>
            </div>

            <!-- Form 2: Contact Form -->
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="form-section" id="form2">
                    <div class="section-header d-flex align-items-center">
                        <i class="bi bi-envelope-fill form-icon"></i>
                        <h2 class="h4 mb-0">Formulario de Contacto</h2>
                    </div>
                    <form>
                        <div class="mb-3">
                            <label for="contactName" class="form-label">Nombre</label>
                            <input type="text" class="form-control" id="contactName" placeholder="Ingrese su nombre" required>
                        </div>
                        <div class="mb-3">
                            <label for="contactEmail" class="form-label">Correo Electrónico</label>
                            <input type="email" class="form-control" id="contactEmail" placeholder="nombre@ejemplo.com" required>
                        </div>
                        <div class="mb-3">
                            <label for="subject" class="form-label">Asunto</label>
                            <input type="text" class="form-control" id="subject" placeholder="¿Sobre qué trata?" required>
                        </div>
                        <div class="mb-3">
                            <label for="message" class="form-label">Mensaje</label>
                            <textarea class="form-control" id="message" rows="4" placeholder="Escriba su mensaje aquí..." required></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="department" class="form-label">Departamento</label>
                            <select class="form-select" id="department">
                                <option selected>Seleccione un departamento</option>
                                <option value="support">Soporte Técnico</option>
                                <option value="sales">Ventas</option>
                                <option value="billing">Facturación</option>
                                <option value="other">Otro</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary submit-btn">Enviar Mensaje</button>
                    </form>
                </div>
            </div>

            <!-- Form 3: Feedback Form -->
            <div class="col-lg-4 col-md-12 mb-4">
                <div class="form-section" id="form3">
                    <div class="section-header d-flex align-items-center">
                        <i class="bi bi-chat-left-text-fill form-icon"></i>
                        <h2 class="h4 mb-0">Formulario de Feedback</h2>
                    </div>
                    <form>
                        <div class="mb-3">
                            <label class="form-label">¿Cómo calificaría nuestro servicio?</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="rating" id="excellent" value="excellent">
                                <label class="form-check-label" for="excellent">Excelente</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="rating" id="good" value="good">
                                <label class="form-check-label" for="good">Bueno</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="rating" id="average" value="average">
                                <label class="form-check-label" for="average">Regular</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="rating" id="poor" value="poor">
                                <label class="form-check-label" for="poor">Malo</label>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">¿Qué características utiliza más? (Seleccione todas las que correspondan)</label>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="feature1" value="option1">
                                <label class="form-check-label" for="feature1">Característica 1</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="feature2" value="option2">
                                <label class="form-check-label" for="feature2">Característica 2</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="feature3" value="option3">
                                <label class="form-check-label" for="feature3">Característica 3</label>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="suggestions" class="form-label">Sugerencias de mejora</label>
                            <textarea class="form-control" id="suggestions" rows="3" placeholder="¿Qué podemos mejorar?"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="recommend" class="form-label">¿Qué tan probable es que nos recomiende?</label>
                            <input type="range" class="form-range" id="recommend" min="0" max="10">
                            <div class="d-flex justify-content-between">
                                <small>Poco probable</small>
                                <small>Muy probable</small>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary submit-btn">Enviar Feedback</button>
                    </form>
                </div>
            </div>
        </div>

        <footer class="text-center mt-5 mb-5">
            <p class="text-muted">© 2023 Mi Aplicación. Todos los derechos reservados.</p>
        </footer>
    </div>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Configuración de Firebase (reemplaza con tus propios valores)
        const firebaseConfig = {
            apiKey: "TU_API_KEY",
            authDomain: "tu-proyecto.firebaseapp.com",
            projectId: "tu-proyecto",
            storageBucket: "tu-proyecto.appspot.com",
            messagingSenderId: "123456789",
            appId: "TU_APP_ID"
        };

        // Inicializar Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        // Referencias a elementos del DOM
        const registrationForm = document.getElementById('registrationForm');
        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
        const confirmPasswordInput = document.getElementById('confirmPassword');
        const fullNameInput = document.getElementById('fullName');
        const registerBtn = document.getElementById('registerBtn');
        const registerSpinner = document.getElementById('registerSpinner');
        const toast = document.getElementById('liveToast');
        const toastTitle = document.getElementById('toast-title');
        const toastBody = document.getElementById('toast-body');
        const bsToast = new bootstrap.Toast(toast);
        
        // Toggle para mostrar/ocultar contraseña
        document.querySelectorAll('.password-toggle').forEach(toggle => {
            toggle.addEventListener('click', function() {
                const input = this.parentElement.querySelector('input');
                const icon = this.querySelector('i');
                
                if (input.type === 'password') {
                    input.type = 'text';
                    icon.classList.remove('bi-eye');
                    icon.classList.add('bi-eye-slash');
                } else {
                    input.type = 'password';
                    icon.classList.remove('bi-eye-slash');
                    icon.classList.add('bi-eye');
                }
            });
        });

        // Función para mostrar notificaciones
        function showToast(title, message, isSuccess = false) {
            toastTitle.textContent = title;
            toastBody.textContent = message;
            
            if (isSuccess) {
                toastHeader.classList.remove('bg-danger');
                toastHeader.classList.add('bg-success');
            } else {
                toastHeader.classList.remove('bg-success');
                toastHeader.classList.add('bg-danger');
            }
            
            bsToast.show();
        }

        // Función para registrar usuarios
        function registerUser(email, password, fullName) {
            registerBtn.disabled = true;
            registerSpinner.classList.remove('d-none');
            
            auth.createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    // Usuario registrado con éxito
                    const user = userCredential.user;
                    
                    // Actualizar perfil del usuario con el nombre completo
                    user.updateProfile({
                        displayName: fullName
                    }).then(() => {
                        showToast('¡Éxito!', `Usuario ${fullName} registrado correctamente. Se ha enviado un email de verificación.`, true);
                        registrationForm.reset();
                    }).catch((error) => {
                        showToast('Error', 'Error al actualizar el perfil: ' + error.message);
                    });
                })
                .catch((error) => {
                    // Manejar errores
                    let errorMessage = 'Error desconocido';
                    
                    switch(error.code) {
                        case 'auth/email-already-in-use':
                            errorMessage = 'Este correo electrónico ya está en uso.';
                            break;
                        case 'auth/invalid-email':
                            errorMessage = 'El formato del correo electrónico no es válido.';
                            break;
                        case 'auth/weak-password':
                            errorMessage = 'La contraseña es demasiado débil. Debe tener al menos 6 caracteres.';
                            break;
                        default:
                            errorMessage = error.message;
                    }
                    
                    showToast('Error de registro', errorMessage);
                })
                .finally(() => {
                    registerBtn.disabled = false;
                    registerSpinner.classList.add('d-none');
                });
        }

        // Validación del formulario de registro
        registrationForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = emailInput.value.trim();
            const password = passwordInput.value;
            const confirmPassword = confirmPasswordInput.value;
            const fullName = fullNameInput.value.trim();
            
            // Validaciones básicas
            if (!fullName) {
                showToast('Error', 'Por favor, ingrese su nombre completo.');
                return;
            }
            
            if (password.length < 6) {
                showToast('Error', 'La contraseña debe tener al menos 6 caracteres.');
                return;
            }
            
            if (password !== confirmPassword) {
                showToast('Error', 'Las contraseñas no coinciden.');
                return;
            }
            
            // Registrar usuario
            registerUser(email, password, fullName);
        });

        // Escuchar cambios en el estado de autenticación
        auth.onAuthStateChanged((user) => {
            if (user) {
                // Usuario ha iniciado sesión
                console.log('Usuario autenticado:', user);
            } else {
                // Usuario ha cerrado sesión
                console.log('Usuario no autenticado');
            }
        });
    </script>
</body>
</html>